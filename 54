int countComponents(int V, ArrayList<ArrayList<Integer>> adj) {
    boolean[] visited = new boolean[V];
    int count = 0;

    for (int i = 0; i < V; i++) {
        if (!visited[i]) {
            dfs(i, visited, adj);
            count++;
        }
    }
    return count;
}
